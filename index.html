<!DOCTYPE html>
<html lang="ko"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><head><title></title><meta http_quiv="content-type" content="text/html; charset=utf-8"><link rel="stylesheet" type="text/css" href="index_style.css"></head><body><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;!DOCTYPE html&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;html lang="ko"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;head&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset="UTF-8"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;우리 반 1인 1역 지원 시스템&lt;/title&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body { font-family: 'Inter', sans-serif; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.phase-indicator { transition: all 0.3s ease-in-out; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.role-card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.role-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.modal-backdrop {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position: fixed; top: 0; left: 0; width: 100%; height: 100%;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color: rgba(0, 0, 0, 0.7); display: flex;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;justify-content: center; align-items: center; z-index: 50;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.modal-content {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color: white; padding: 2rem; border-radius: 0.5rem;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max-width: 500px; width: 90%; text-align: center;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#teacherModeToggle:checked ~ .block { background-color: #4f46e5; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#teacherModeToggle:checked ~ .dot { transform: translateX(24px); }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.hashtag {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color: #e0e7ff; color: #3730a3; padding: 0.25rem 0.75rem;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border-radius: 9999px; font-size: 0.875rem; font-weight: 500;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ai-suggestion-btn {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color: #f0f9ff; color: #0284c7; border: 1px solid #7dd3fc;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.875rem;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-right: 0.5rem; margin-top: 0.5rem; cursor: pointer;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.ai-suggestion-btn:hover { background-color: #e0f2fe; }</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#countdownBanner {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position: fixed; top: -100px; left: 50%; transform: translateX(-50%);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transition: top 0.5s ease-in-out;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z-index: 100;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.role-badge {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding: 0.125rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-weight: 600; text-transform: uppercase;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.badge-default { background-color: #d1fae5; color: #065f46; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.badge-proposed { background-color: #fee2e2; color: #991b1b; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.editable-role-name { cursor: pointer; border-bottom: 2px dotted #a5b4fc; }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.pinned { border: 2px solid #f59e0b; box-shadow: 0 0 15px rgba(245, 158, 11, 0.5); }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.selected-for-swap {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;border: 2px solid #4f46e5;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transform: scale(1.05);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;background-color: #c7d2fe;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/style&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;/head&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;body class="bg-gray-100 text-gray-800"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="app" class="container mx-auto p-4 md:p-8 max-w-7xl"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Header and other static elements --&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;header class="bg-white rounded-lg shadow p-6 mb-8"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="flex justify-between items-center flex-wrap gap-4"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1 class="text-2xl md:text-3xl font-bold text-indigo-600"&gt;우리 반 1인 1역 지원 시스템 ✨&lt;/h1&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p class="text-gray-500 mt-1"&gt;민주적인 절차로 우리 반의 역할을 함께 만들어가요!&lt;/p&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="flex items-center space-x-4"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span id="currentUser" class="font-semibold text-gray-700 hidden"&gt;&lt;/span&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button id="logoutBtn" class="hidden bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">text-sm"&gt;처음으로&lt;/button&gt;</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="flex items-center"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="text-sm font-medium mr-2"&gt;교사 모드&lt;/span&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label for="teacherModeToggle" class="flex items-center cursor-pointer"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="relative"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="checkbox" id="teacherModeToggle" class="sr-only"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="block bg-gray-600 w-14 h-8 rounded-full"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/label&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/header&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="loginSection" class="text-center bg-white p-8 rounded-lg shadow"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2 class="text-xl font-bold mb-4"&gt;로그인&lt;/h2&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p id="loginDescription" class="text-gray-600 mb-6"&gt;이름을 입력하여 시스템에 참여하세요.&lt;/p&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="text" id="nameInput" placeholder="이름을 입력하세요" class="w-full max-w-sm p-3 border rounded-lg focus:ring-2&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">focus:ring-indigo-500 focus:outline-none"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="password" id="passwordInput" placeholder="비밀번호를 입력하세요" class="w-full max-w-sm p-3 border rounded-lg&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">focus:ring-2 focus:ring-indigo-500 focus:outline-none hidden"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button id="loginButton" class="mt-4 w-full max-w-sm bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">transition duration-300"&gt;입장하기&lt;/button&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;main id="mainContent" class="hidden"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="phase1Indicator" class="phase-indicator p-4 rounded-lg text-center border-2 border-gray-300"&gt;&lt;span class="text-sm&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">font-bold text-gray-500"&gt;1단계&lt;/span&gt;&lt;p&gt;역할 제안/투표&lt;/p&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="phase2Indicator" class="phase-indicator p-4 rounded-lg text-center border-2 border-gray-300"&gt;&lt;span class="text-sm&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">font-bold text-gray-500"&gt;2단계&lt;/span&gt;&lt;p&gt;역할 확정&lt;/p&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="phase3Indicator" class="phase-indicator p-4 rounded-lg text-center border-2 border-gray-300"&gt;&lt;span class="text-sm&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">font-bold text-gray-500"&gt;3단계&lt;/span&gt;&lt;p&gt;역할 지원&lt;/p&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="phase4Indicator" class="phase-indicator p-4 rounded-lg text-center border-2 border-gray-300"&gt;&lt;span class="text-sm&nbsp;</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">font-bold text-gray-500"&gt;4단계&lt;/span&gt;&lt;p&gt;경쟁률 확인&lt;/p&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="phase5Indicator" class="phase-indicator p-4 rounded-lg text-center border-2 border-gray-300"&gt;&lt;span class="text-sm&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">font-bold text-gray-500"&gt;5단계&lt;/span&gt;&lt;p&gt;역할 배정 완료&lt;/p&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="contentArea" class="bg-white rounded-lg shadow p-6 min-h-[500px]"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="teacherControls" class="hidden mt-8 bg-indigo-50 p-6 rounded-lg shadow"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/main&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!-- Modals --&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="proposeRoleModal" class="modal-backdrop hidden"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="importRolesModal" class="modal-backdrop hidden"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="messageModal" class="modal-backdrop hidden"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="cheerModal" class="modal-backdrop hidden"&gt;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;script type="module"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Firebase SDK imports</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import { getFirestore, doc, setDoc, getDoc, onSnapshot, collection, addDoc, updateDoc, writeBatch, query, getDocs, deleteDoc, deleteField,&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">serverTimestamp, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- 선생님의 Firebase 프로젝트 정보 ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const firebaseConfig = {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apiKey: "AIzaSyB6Ai9RVvVHP1kkgbyofu_5Qem7H8HAkEc",</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authDomain: "role-choosing.firebaseapp.com",</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;projectId: "role-choosing",</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;storageBucket: "role-choosing.firebasestorage.app",</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messagingSenderId: "442128106946",</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appId: "1:442128106946:web:c37b796fbffa8d651c025b"</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const app = initializeApp(firebaseConfig);</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const db = getFirestore(app);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const auth = getAuth(app);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Global State &amp; DOM Elements ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let currentUser = null, isTeacher = false, currentPhase = 'proposal';</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let unsubscribeAppState, unsubscribeRoles, unsubscribeStatusListener, unsubscribeRosterListener;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let localChoices = {};</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let firstStudentToSwap = null;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const mainContent = document.getElementById('mainContent');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const teacherControls = document.getElementById('teacherControls');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const contentArea = document.getElementById('contentArea');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const nameInput = document.getElementById('nameInput');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const passwordInput = document.getElementById('passwordInput');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const logoutBtn = document.getElementById('logoutBtn');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Firestore References (Simplified for deployment) ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const appStateRef = doc(db, 'appState', 'state');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const rolesCollectionRef = collection(db, 'roles');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const applicationsCollectionRef = collection(db, 'applications');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const studentsCollectionRef = collection(db, 'students');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const finalizedRolesCollectionRef = collection(db, 'finalizedRoles');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const defaultRoles = [</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ name: '공기 청정 담당자', requiredPeople: 2, reason: '교실 공기청정기를 관리하며 쾌적한 환경을 유지합니다.', hashtag: '#책임감' },</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ name: '분리수거 전문가', requiredPeople: 2, reason: '재활용품 분리수거를 주도하여 환경 보호에 기여합니다.', hashtag: '#봉사' },</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const PHASES = ['proposal', 'finalization', 'application', 'competition', 'results'];</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const TEACHER_PASSWORD = 'teacher123';</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Main App Logic ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function init() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function toggleLoginMode() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function handleLogin() { /* Unchanged */ }</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function startAppListeners() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function updatePhaseIndicator() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function renderContent() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Phase 1: Proposal &amp; Voting ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function renderProposalPhase() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Phase 2: Role Finalization (Teacher Only) ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function renderFinalizationPhase() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Phase 3: Application ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function renderApplicationPhase() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Phase 4: Competition Rate ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function renderCompetitionPhase() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Phase 5: Results ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function renderResultsPhase() {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentArea.innerHTML = `&lt;h2 class="text-xl font-bold mb-6"&gt;5단계: 역할 배정 결과&lt;/h2&gt;&lt;div id="resultsList" class="space-y-4"&gt;&lt;/div&gt;`;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const resultsList = document.getElementById('resultsList');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const applicationsSnapshot = await getDocs(applicationsCollectionRef);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (applicationsSnapshot.empty) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultsList.innerHTML = '&lt;p class="text-gray-500"&gt;아직 배정된 결과가 없습니다. 교사 모드에서 역할 배정을 실행해주세요.&lt;/p&gt;';</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (isTeacher) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let html = '&lt;p class="text-sm text-gray-500 mb-4"&gt;역할을 교환하려면 첫 번째 학생을 클릭한 후, 교환할 두 번째 학생을 클릭하세요.&lt;/p&gt;&lt;div&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"&gt;';</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applicationsSnapshot.forEach(docSnap =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const data = docSnap.data();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html += `&lt;div class="p-4 bg-gray-100 rounded-lg cursor-pointer hover:bg-indigo-100 transition swap-card"&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">data-student="${data.user}"&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="font-bold text-lg"&gt;${data.user}&lt;/span&gt;:&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span class="text-indigo-600 font-semibold"&gt;${data.assignedRoleName || '미배정'}&lt;/span&gt;</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;`;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultsList.innerHTML = html + '&lt;/div&gt;';</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultsList.addEventListener('click', handleSwapClick);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Student view logic remains the same</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function handleSwapClick(e) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!isTeacher) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const card = e.target.closest('.swap-card');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!card) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const studentName = card.dataset.student;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!firstStudentToSwap) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstStudentToSwap = studentName;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;card.classList.add('selected-for-swap');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (firstStudentToSwap === studentName) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstStudentToSwap = null;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;card.classList.remove('selected-for-swap');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const secondStudentToSwap = studentName;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (confirm(`${firstStudentToSwap} 학생과 ${secondStudentToSwap} 학생의 역할을 교환하시겠습니까?`)) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const doc1Ref = doc(applicationsCollectionRef, firstStudentToSwap);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const doc2Ref = doc(applicationsCollectionRef, secondStudentToSwap);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const [doc1Snap, doc2Snap] = await Promise.all([getDoc(doc1Ref), getDoc(doc2Ref)]);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (doc1Snap.exists() &amp;&amp; doc2Snap.exists()) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const student1Data = doc1Snap.data();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const student2Data = doc2Snap.data();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const batch = writeBatch(db);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batch.update(doc1Ref, {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleId: student2Data.assignedRoleId || null,</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleName: student2Data.assignedRoleName || "미배정"</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batch.update(doc2Ref, {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleId: student1Data.assignedRoleId || null,</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleName: student1Data.assignedRoleName || "미배정"</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await batch.commit();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage("역할을 성공적으로 교환했습니다.", "success");</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage("학생 정보를 찾을 수 없습니다.");</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error("Swap error:", error);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage("역할 교환 중 오류가 발생했습니다.");</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.querySelector('.selected-for-swap')?.classList.remove('selected-for-swap');</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstStudentToSwap = null;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- Teacher Controls &amp; Assignment ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function renderTeacherDashboard() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function listenForStudentStatusUpdates() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function handleResetStudentStatus(studentName) { /* Unchanged */ }</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function startCountdown() { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function showCountdown(endTime) { /* Unchanged */ }</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function runAssignmentAlgorithm() {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!confirm("자동 역할 배정을 실행하시겠습니까?")) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const [rolesSnapshot, appsSnapshot, studentsSnapshot] = await Promise.all([</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getDocs(finalizedRolesCollectionRef),</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getDocs(applicationsCollectionRef),</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getDocs(studentsCollectionRef)</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let roles = rolesSnapshot.docs.map(d =&gt; ({ id: d.id, ...d.data() }));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let allStudents = studentsSnapshot.docs.map(d =&gt; d.id);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let validApplications = appsSnapshot.docs</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.map(d =&gt; ({ id: d.id, ...d.data() }))</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.filter(app =&gt; app.choices &amp;&amp; app.choices['1'] &amp;&amp; app.choices['2'] &amp;&amp; app.choices['3']);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let assignments = {}; // studentName -&gt; roleId</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let roleSlots = {}; // roleId -&gt; [student1, student2]</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roles.forEach(r =&gt; roleSlots[r.id] = []);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 배정 로직</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1, 2, 3].forEach(choiceNum =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validApplications.forEach(app =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const studentName = app.id;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (assignments[studentName]) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const roleId = app.choices[String(choiceNum)];</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!roleId || !roleSlots[roleId]) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const role = roles.find(r =&gt; r.id === roleId);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const applicantsForRole = validApplications.filter(a =&gt; a.choices[String(choiceNum)] === roleId &amp;&amp; !assignments[a.id]);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (applicantsForRole.length &lt;= (role.requiredPeople - roleSlots[roleId].length)) {</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignments[studentName] = roleId;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roleSlots[roleId].push(studentName);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roles.forEach(role =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const competingApplicants = validApplications.filter(app =&gt; !assignments[app.id] &amp;&amp; (app.choices['1'] === role.id || app.choices['2'] ===&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">role.id || app.choices['3'] === role.id));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const availableSlots = role.requiredPeople - roleSlots[role.id].length;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (competingApplicants.length &gt; 0 &amp;&amp; availableSlots &gt; 0) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;competingApplicants.sort((a, b) =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const aMatch = a.myHashtag === role.hashtag ? 1 : 0;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const bMatch = b.myHashtag === role.hashtag ? 1 : 0;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (aMatch !== bMatch) return bMatch - aMatch;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Math.random() - 0.5;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;competingApplicants.slice(0, availableSlots).forEach(app =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignments[app.id] = role.id;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roleSlots[role.id].push(app.id);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let unassignedStudents = allStudents.filter(s =&gt; !assignments[s] &amp;&amp; validApplications.find(a =&gt; a.id === s));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (const studentName of unassignedStudents) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const app = validApplications.find(a =&gt; a.id === studentName);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let availableRoles = roles.filter(r =&gt; roleSlots[r.id].length &lt; r.requiredPeople);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const matchingRole = availableRoles.find(r =&gt; r.hashtag === app.myHashtag);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (matchingRole) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignments[studentName] = matchingRole.id;</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roleSlots[matchingRole.id].push(studentName);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unassignedStudents = allStudents.filter(s =&gt; !assignments[s] &amp;&amp; validApplications.find(a =&gt; a.id === s));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (const studentName of unassignedStudents) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let availableRoles = roles.filter(r =&gt; roleSlots[r.id].length &lt; r.requiredPeople);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (availableRoles.length &gt; 0) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const randomRole = availableRoles[Math.floor(Math.random() * availableRoles.length)];</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignments[studentName] = randomRole.id;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roleSlots[randomRole.id].push(studentName);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 최종 결과 업데이트</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const batch = writeBatch(db);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const rolesMap = new Map(roles.map(r =&gt; [r.id, r.name]));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allStudents.forEach(studentName =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const assignedRoleId = assignments[studentName];</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let assignedRoleName = "미배정";</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const studentApp = appsSnapshot.docs.find(d =&gt; d.id === studentName)?.data();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (assignedRoleId) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:129.65mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleName = rolesMap.get(assignedRoleId);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:135.29mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else if (!studentApp || !studentApp.choices || !studentApp.choices['1'] || !studentApp.choices['2'] || !studentApp.choices['3']) {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:140.93mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignedRoleName = "미배정 (지원서 미완료)";</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:146.58mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:152.22mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:157.87mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batch.set(doc(applicationsCollectionRef, studentName), { assignedRoleId, assignedRoleName, user: studentName }, { merge: true });</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:163.51mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:169.16mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await batch.commit();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:174.80mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:180.45mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;showMessage("자동 역할 배정이 완료되었습니다.", "success");</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:186.09mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await changePhase('results');</span></div></div></div></div><div class="hpa" style="width:297mm;height:210mm;"><div class="hcD" style="left:15mm;top:10mm;"><div class="hcI"><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:-0.18mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:5.47mm;height:3.53mm;width:267mm;"></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:11.11mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async function changePhase(newPhase, showMsg = false) {&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:16.76mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!newPhase) return;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:22.40mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (currentPhase === 'finalization' &amp;&amp; newPhase === 'application') {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:28.05mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const rolesSnapshot = await getDocs(rolesCollectionRef);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:33.69mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const finalizedSnapshot = await getDocs(finalizedRolesCollectionRef);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:39.33mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const batch = writeBatch(db);</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:44.98mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finalizedSnapshot.forEach(doc =&gt; batch.delete(doc.ref));</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:50.62mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rolesSnapshot.forEach(doc =&gt; {</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:56.27mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batch.set(doc(finalizedRolesCollectionRef, doc.id), doc.data());</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:61.91mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:67.56mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await batch.commit();</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:73.20mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:78.85mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await setDoc(appStateRef, { phase: newPhase });&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:84.49mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(showMsg) showMessage(`단계가 변경되었습니다.`, "success");</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:90.13mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:95.78mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:101.42mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// --- All other helper functions (init, login, modals, etc.) are assumed to be here and unchanged ---</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:107.07mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/script&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:112.71mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;/body&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:118.36mm;height:3.53mm;width:267mm;"><span class="hrt cs0">&lt;/html&gt;</span></div><div class="hls ps20" style="line-height:2.79mm;white-space:nowrap;left:0mm;top:124mm;height:3.53mm;width:267mm;"></div></div></div></div></body></html>